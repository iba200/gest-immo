<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <title>Quittance de Loyer</title>
    <style>
        body {
            font-family: Helvetica, Arial, sans-serif;
            font-size: 12pt;
            line-height: 1.5;
            color: #333;
        }

        .header {
            margin-bottom: 30px;
            border-bottom: 2px solid #FF6B35;
            padding-bottom: 10px;
            height: 120px;
        }

        .company-info {
            float: left;
            width: 60%;
            text-align: left;
        }

        .company-name {
            font-size: 16pt;
            font-weight: bold;
            color: #1A1F3A;
            margin: 0;
            text-transform: uppercase;
        }

        .company-details {
            font-size: 10pt;
            color: #555;
            margin-top: 5px;
            line-height: 1.2;
        }

        .logo {
            max-height: 60px;
            margin-bottom: 5px;
        }

        .receipt-meta {
            float: right;
            width: 35%;
            text-align: right;
        }

        .receipt-title {
            font-size: 14pt;
            font-weight: bold;
            color: #FF6B35;
            margin: 0;
        }

        .receipt-number {
            font-size: 12pt;
            font-weight: bold;
            margin: 5px 0 0 0;
        }

        .receipt-date {
            font-size: 10pt;
            color: #666;
            margin: 0;
        }

        .info-grid {
            margin-bottom: 30px;
            clear: both;
        }

        .row {
            clear: both;
            margin-bottom: 15px;
        }

        .label {
            font-weight: bold;
            width: 150px;
            float: left;
        }

        .value {
            float: left;
        }

        .box {
            border: 1px solid #ddd;
            padding: 15px;
            background-color: #f9f9f9;
            margin-bottom: 30px;
        }

        .total {
            font-size: 14pt;
            font-weight: bold;
            text-align: right;
            margin-top: 20px;
        }

        .footer {
            margin-top: 50px;
            font-size: 10pt;
            text-align: center;
            color: #777;
            border-top: 1px solid #eee;
            padding-top: 10px;
        }
    </style>
</head>

<body>
    <div class="header">
        <div class="company-info">
            {% if payment.prop.user.company_logo %}
            <img src="{{ url_for('static', filename='uploads/logos/' + payment.prop.user.company_logo, _external=True) }}"
                class="logo">
            {% else %}
            <h1 class="company-name">{{ payment.prop.user.company_name or "IMMOGEST" }}</h1>
            {% endif %}

            {% if payment.prop.user.company_name and payment.prop.user.company_logo %}
            <h2 class="company-name">{{ payment.prop.user.company_name }}</h2>
            {% endif %}

            <p class="company-details">
                {{ payment.prop.user.company_address or "Gestion Immobilière Facilitée" }}<br>
                Tél: {{ payment.prop.user.phone }}<br>
                Email: {{ payment.prop.user.email }}
            </p>
        </div>
        <div class="receipt-meta">
            <h1 class="receipt-title">QUITTANCE DE LOYER</h1>
            <p class="receipt-number">N° {{ payment.receipt_number }}</p>
            <p class="receipt-date">Date: {{ payment.date.strftime('%d/%m/%Y') }}</p>
        </div>
    </div>

    <div class="info-grid">
        <div class="box">
            <div class="row">
                <span class="label">Bailleur:</span>
                <span class="value">{{ payment.prop.user.first_name }} {{ payment.prop.user.last_name }}</span>
            </div>
            <div class="row">
                <span class="label">Contact:</span>
                <span class="value">{{ payment.prop.user.phone }}</span>
            </div>
        </div>

        <div class="box">
            <div class="row">
                <span class="label">Locataire:</span>
                <span class="value">{{ payment.tenant.full_name }}</span>
            </div>
            <div class="row">
                <span class="label">Bien Loué:</span>
                <span class="value">{{ payment.prop.name }} - {{ payment.prop.address }} ({{
                    payment.prop.city }})</span>
            </div>
        </div>
    </div>

    <div class="box">
        <div class="row">
            <span class="label">Période:</span>
            <span class="value">Du 01/{{ "%02d"|format(payment.period_month) }}/{{ payment.period_year }} au {{ 28 if
                payment.period_month==2 else 30 }}/{{ "%02d"|format(payment.period_month) }}/{{ payment.period_year
                }}</span>
        </div>
        <div class="row">
            <span class="label">Date de paiement:</span>
            <span class="value">{{ payment.date.strftime('%d/%m/%Y') }}</span>
        </div>
        <div class="row">
            <span class="label">Mode de règlement:</span>
            <span class="value">{{ payment.payment_method }} {% if payment.transaction_ref %}(Ref: {{
                payment.transaction_ref }}){% endif %}</span>
        </div>
    </div>

    <div class="total">
        Montant Payé: {{ payment.amount }} FCFA
    </div>

    <div class="footer">
        <p>Ce document est une preuve de paiement générée électroniquement par ImmoGest.</p>
        <p>Date d'émission: {{ payment.created_at.strftime('%d/%m/%Y') }}</p>
    </div>
</body>

</html>